var ie=o=>{throw TypeError(o)};var Y=(o,i,e)=>i.has(o)||ie("Cannot "+e);var f=(o,i,e)=>(Y(o,i,"read from private field"),e?e.call(o):i.get(o)),R=(o,i,e)=>i.has(o)?ie("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(o):i.set(o,e),F=(o,i,e,t)=>(Y(o,i,"write to private field"),t?t.call(o,e):i.set(o,e),e),B=(o,i,e)=>(Y(o,i,"access private method"),e);import{Q as Te,i as oe,h as Ne,a as Pe,S as ze,s as De,b as re,g as ke,n as ce,u as Re,r as p,c as Fe,d as Be,e as Ke,f as W,j as n,k as he,l as Ae,m as Ue,R as $e,L as Le,o as We,p as Ve,q as qe}from"./index-C2-WljFT.js";var Ge=class extends Te{constructor(o,i){super(o,i)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(o,i){super.setOptions({...o,behavior:oe()},i)}getOptimisticResult(o){return o.behavior=oe(),super.getOptimisticResult(o)}fetchNextPage(o){return this.fetch({...o,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(o){return this.fetch({...o,meta:{fetchMore:{direction:"backward"}}})}createResult(o,i){var C,_;const{state:e}=o,t=super.createResult(o,i),{isFetching:s,isRefetching:r,isError:a,isRefetchError:l}=t,c=(_=(C=e.fetchMeta)==null?void 0:C.fetchMore)==null?void 0:_.direction,d=a&&c==="forward",u=s&&c==="forward",g=a&&c==="backward",b=s&&c==="backward";return{...t,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Ne(i,e.data),hasPreviousPage:Pe(i,e.data),isFetchNextPageError:d,isFetchingNextPage:u,isFetchPreviousPageError:g,isFetchingPreviousPage:b,isRefetchError:l&&!d&&!g,isRefetching:r&&!u&&!b}}},z,D,j,O,T,$,Z,le,He=(le=class extends ze{constructor(i,e){super();R(this,T);R(this,z);R(this,D);R(this,j);R(this,O);F(this,z,i),this.setOptions(e),this.bindMethods(),B(this,T,$).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(i){var t;const e=this.options;this.options=f(this,z).defaultMutationOptions(i),De(this.options,e)||f(this,z).getMutationCache().notify({type:"observerOptionsUpdated",mutation:f(this,j),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&re(e.mutationKey)!==re(this.options.mutationKey)?this.reset():((t=f(this,j))==null?void 0:t.state.status)==="pending"&&f(this,j).setOptions(this.options)}onUnsubscribe(){var i;this.hasListeners()||(i=f(this,j))==null||i.removeObserver(this)}onMutationUpdate(i){B(this,T,$).call(this),B(this,T,Z).call(this,i)}getCurrentResult(){return f(this,D)}reset(){var i;(i=f(this,j))==null||i.removeObserver(this),F(this,j,void 0),B(this,T,$).call(this),B(this,T,Z).call(this)}mutate(i,e){var t;return F(this,O,e),(t=f(this,j))==null||t.removeObserver(this),F(this,j,f(this,z).getMutationCache().build(f(this,z),this.options)),f(this,j).addObserver(this),f(this,j).execute(i)}},z=new WeakMap,D=new WeakMap,j=new WeakMap,O=new WeakMap,T=new WeakSet,$=function(){var e;const i=((e=f(this,j))==null?void 0:e.state)??ke();F(this,D,{...i,isPending:i.status==="pending",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset})},Z=function(i){ce.batch(()=>{var e,t,s,r,a,l,c,d;if(f(this,O)&&this.hasListeners()){const u=f(this,D).variables,g=f(this,D).context;(i==null?void 0:i.type)==="success"?((t=(e=f(this,O)).onSuccess)==null||t.call(e,i.data,u,g),(r=(s=f(this,O)).onSettled)==null||r.call(s,i.data,null,u,g)):(i==null?void 0:i.type)==="error"&&((l=(a=f(this,O)).onError)==null||l.call(a,i.error,u,g),(d=(c=f(this,O)).onSettled)==null||d.call(c,void 0,i.error,u,g))}this.listeners.forEach(u=>{u(f(this,D))})})},le);function L(o,i){const e=Re(),[t]=p.useState(()=>new He(e,o));p.useEffect(()=>{t.setOptions(o)},[t,o]);const s=p.useSyncExternalStore(p.useCallback(a=>t.subscribe(ce.batchCalls(a)),[t]),()=>t.getCurrentResult(),()=>t.getCurrentResult()),r=p.useCallback((a,l)=>{t.mutate(a,l).catch(Fe)},[t]);if(s.error&&Be(t.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:r,mutateAsync:s.mutate}}function Qe(o,i){return Ke(o,Ge)}const Ye="/assets/banner-DnXqKU4i.jpg",Je="_banner_1aaj1_2",Ze="_overlay_1aaj1_22",M={banner:Je,"banner-div":"_banner-div_1aaj1_7","banner-content":"_banner-content_1aaj1_13",overlay:Ze,"banner-span":"_banner-span_1aaj1_31","btn-find":"_btn-find_1aaj1_36"},Xe=()=>{const{lang:o}=W();return n.jsxs("div",{children:[n.jsxs("div",{className:M["banner-div"],children:[n.jsx("img",{className:M.banner,src:Ye,alt:"banner"}),n.jsx("div",{className:M.overlay})]}),n.jsxs("div",{className:M["banner-content"],children:[n.jsx("h1",{children:o==="eng"?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:M["banner-span"],children:"FIND"})," interesting information about different countries and"," ",n.jsx("span",{className:M["banner-span"],children:"CHOOSE"})," your favorite"]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:M["banner-span"],children:"მოიძიე"})," ინფორმაცია სხვადასხვა ქვეყნების შესახებ და"," ",n.jsx("span",{className:M["banner-span"],children:"აირჩიე"})," შენი ფავორიტი"]})}),n.jsx("button",{className:M["btn-find"],children:o==="eng"?"FIND":"მოიძიე"})]})]})},et={"card-content":"_card-content_vguop_1"},tt=({name:o,population:i,capital:e})=>n.jsxs("div",{className:et["card-content"],children:[n.jsxs("h3",{children:["Country: ",o]}),n.jsxs("p",{children:["Population: ",i]}),n.jsxs("p",{children:["Capital: ",e]})]}),st={"svg-div":"_svg-div_1roni_1"},nt=({id:o,votes:i,refetch:e})=>{const[t,s]=p.useState(!1),{lang:r}=W(),{mutate:a}=L({mutationFn:he,onSuccess:()=>{e()},onError:d=>{console.log(d)}}),l=()=>{const d=i+1;a({id:o,payload:{votes:d}})},c=()=>{s(!0),setTimeout(()=>{s(!1)},500)};return n.jsxs("div",{className:st["svg-div"],children:[n.jsx("div",{children:n.jsx("p",{children:`${r==="eng"?`HEART: ${i}`:`გული: ${i}`}`})}),n.jsxs("svg",{onClick:()=>{c(),l()},width:"50",height:"50",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M79.5 40C79.5 61.5332 61.8212 79 40 79C18.1788 79 0.5 61.5332 0.5 40C0.5 18.4668 18.1788 1 40 1C61.8212 1 79.5 18.4668 79.5 40Z",fill:t?"#6F4E37":"white",stroke:"#E9E9F2"}),n.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.9974 24.4044C42.1899 22.2239 45.0189 21.4473 47.732 21.4861C54.2531 21.5793 60.8348 26.8343 60.8348 34.4468C60.8348 41.7693 56.092 47.8655 51.4011 52.01C49.0276 54.107 46.5932 55.7718 44.6163 56.9183C43.6284 57.4912 42.738 57.9444 42.0114 58.2601C41.6495 58.4174 41.3098 58.5486 41.0072 58.6433C40.744 58.7257 40.3729 58.8256 40.0008 58.8256C39.6287 58.8256 39.2577 58.7257 38.9944 58.6433C38.6919 58.5486 38.3522 58.4174 37.9902 58.2601C37.2637 57.9444 36.3733 57.4912 35.3854 56.9183C33.4084 55.7718 30.9741 54.107 28.6006 52.01C23.9097 47.8655 19.1669 41.7693 19.1669 34.4468C19.1669 26.8523 25.7333 21.4859 32.2922 21.4859C34.9318 21.4859 37.7879 22.2282 39.9974 24.4044ZM47.6868 24.5717C45.1914 24.536 42.866 25.3726 41.3009 27.6908C41.0111 28.12 40.5232 28.3779 40.0008 28.3779C39.4784 28.3779 38.9906 28.12 38.7008 27.6908C37.1451 25.3866 34.7774 24.5719 32.2922 24.5719C27.2883 24.5719 22.2919 28.7205 22.2919 34.4468C22.2919 40.4453 26.2212 45.767 30.6843 49.7102C32.8877 51.657 35.1508 53.2035 36.9679 54.2573C37.8771 54.7846 38.6579 55.1788 39.2487 55.4355C39.5454 55.5644 39.7759 55.6506 39.9392 55.7018C39.9625 55.7091 39.983 55.7152 40.0008 55.7203C40.0186 55.7152 40.0392 55.7091 40.0625 55.7018C40.2257 55.6506 40.4562 55.5644 40.7529 55.4355C41.3438 55.1788 42.1246 54.7846 43.0337 54.2573C44.8508 53.2035 47.1139 51.657 49.3174 49.7102C53.7804 45.767 57.7098 40.4453 57.7098 34.4468C57.7098 28.7385 52.7286 24.6437 47.6868 24.5717Z",fill:"#044e42"})]})]})},it={"card-div-img":"_card-div-img_zb6yo_1"},ot=({img:o})=>n.jsx("img",{className:it["card-div-img"],src:o}),rt="_sortBtn_c9pv0_40",at="_btn_c9pv0_41",lt="_display_c9pv0_89",ct="_none_c9pv0_92",ht="_overlay_c9pv0_95",v={"cards-container":"_cards-container_c9pv0_1","virtual-card-divs":"_virtual-card-divs_c9pv0_2","card-div":"_card-div_c9pv0_12","removed-card-div":"_removed-card-div_c9pv0_18","sort-btn-div":"_sort-btn-div_c9pv0_35",sortBtn:rt,btn:at,"search-div":"_search-div_c9pv0_76",display:lt,none:ct,overlay:ht,"display-sure-div":"_display-sure-div_c9pv0_104","none-sure-div":"_none-sure-div_c9pv0_116","sort-divs":"_sort-divs_c9pv0_133"},dt="_langTabBtns_10010_42",ut="_langTabBtn_10010_42",mt="_visible_10010_59",ft="_invisible_10010_62",I={"country-form-div":"_country-form-div_10010_1","submit-btn":"_submit-btn_10010_29",langTabBtns:dt,langTabBtn:ut,visible:mt,invisible:ft},gt=({handleOnSubmit:o,handleOnChange:i,inputErrorMessage:e,name:t,population:s,capital:r,info:a,nameKa:l,capitalKa:c,infoKa:d,addCountryIsPending:u})=>{const{lang:g}=W(),[b,x]=p.useState(g),C=()=>{x("ka")},_=()=>{x("eng")};return n.jsxs("div",{className:I["country-form-div"],children:[n.jsx("h1",{children:g==="eng"?"Add Your Favorite Country":"შენი ფავორიტი ქვეყანა"}),n.jsxs("div",{className:I.langTabBtns,children:[n.jsx("button",{className:I.langTabBtn,onClick:C,children:g==="eng"?"Georgian":"ქართული"}),n.jsxs("button",{className:I.langTabBtn,onClick:_,children:[" ",g==="eng"?"English":"ინგლისური"]})]}),n.jsxs("form",{id:"addCountryForm",onSubmit:o,children:[n.jsxs("label",{children:[b==="eng"?"Add image (JPG, JPEG or PNG):":"დაამატე სურათი (JPG, JPEG ან PNG)",n.jsx("input",{type:"file",name:"img",accept:".jpg, .jpeg, .png",onChange:i})]}),n.jsx("br",{}),n.jsxs("div",{className:b==="eng"?I.visible:I.invisible,children:[n.jsxs("label",{children:['"Enter country name:"',n.jsx("input",{type:"text",value:t,name:"name",onChange:i})]}),n.jsx("p",{children:e}),n.jsx("br",{}),n.jsxs("label",{children:['"Enter country info:"',n.jsx("input",{type:"text",value:a,onChange:i,name:"info"})]}),n.jsx("br",{}),n.jsxs("label",{children:['"Enter capital name:"',n.jsx("input",{type:"text",value:r,name:"capital",onChange:i})]}),n.jsx("br",{})]}),n.jsxs("div",{className:b==="ka"?I.visible:I.invisible,children:[n.jsxs("label",{children:['"ჩაწერე ქვეყნის სახელი"',n.jsx("input",{type:"text",value:l,name:"nameKa",onChange:i})]}),n.jsx("p",{children:e}),n.jsx("br",{}),n.jsxs("label",{children:['"ჩაწერე ქვეყნის ინფორმაცია"',n.jsx("input",{type:"text",value:d,onChange:i,name:"infoKa"})]}),n.jsx("br",{}),n.jsxs("label",{children:['"ჩაწერე ქვეყნის დედაქალაქი"',n.jsx("input",{type:"text",value:c,name:"capitalKa",onChange:i})]}),n.jsx("br",{})]}),n.jsxs("label",{children:[b==="eng"?"Enter population:":"ჩაწერე მოსახლეობა",n.jsx("input",{type:"text",value:s,name:"population",onChange:i})]}),n.jsx("br",{}),n.jsx("button",{className:I["submit-btn"],type:"submit",value:"Submit",disabled:u,children:g==="eng"?"ADD":"დაამატე"})]})]})};function K(o,i,e){let t=e.initialDeps??[],s;return()=>{var r,a,l,c;let d;e.key&&((r=e.debug)!=null&&r.call(e))&&(d=Date.now());const u=o();if(!(u.length!==t.length||u.some((x,C)=>t[C]!==x)))return s;t=u;let b;if(e.key&&((a=e.debug)!=null&&a.call(e))&&(b=Date.now()),s=i(...u),e.key&&((l=e.debug)!=null&&l.call(e))){const x=Math.round((Date.now()-d)*100)/100,C=Math.round((Date.now()-b)*100)/100,_=C/16,k=(E,V)=>{for(E=String(E);E.length<V;)E=" "+E;return E};console.info(`%c⏱ ${k(C,5)} /${k(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*_,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(c=e==null?void 0:e.onChange)==null||c.call(e,s),s}}function J(o,i){if(o===void 0)throw new Error("Unexpected undefined");return o}const pt=(o,i)=>Math.abs(o-i)<1,vt=(o,i,e)=>{let t;return function(...s){o.clearTimeout(t),t=o.setTimeout(()=>i.apply(this,s),e)}},bt=o=>o,xt=o=>{const i=Math.max(o.startIndex-o.overscan,0),e=Math.min(o.endIndex+o.overscan,o.count-1),t=[];for(let s=i;s<=e;s++)t.push(s);return t},yt=(o,i)=>{const e=o.scrollElement;if(!e)return;const t=o.targetWindow;if(!t)return;const s=a=>{const{width:l,height:c}=a;i({width:Math.round(l),height:Math.round(c)})};if(s(e.getBoundingClientRect()),!t.ResizeObserver)return()=>{};const r=new t.ResizeObserver(a=>{const l=a[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(e.getBoundingClientRect())});return r.observe(e,{box:"border-box"}),()=>{r.unobserve(e)}},ae={passive:!0},Ct=typeof window>"u"?!0:"onscrollend"in window,jt=(o,i)=>{const e=o.scrollElement;if(!e)return;const t=o.targetWindow;if(!t)return;let s=0;const r=o.options.useScrollendEvent&&Ct?()=>{}:vt(t,()=>{i(s,!1)},o.options.isScrollingResetDelay),a=d=>()=>{const{horizontal:u,isRtl:g}=o.options;s=u?e.scrollLeft*(g&&-1||1):e.scrollTop,r(),i(s,d)},l=a(!0),c=a(!1);return c(),e.addEventListener("scroll",l,ae),e.addEventListener("scrollend",c,ae),()=>{e.removeEventListener("scroll",l),e.removeEventListener("scrollend",c)}},_t=(o,i,e)=>{if(i!=null&&i.borderBoxSize){const t=i.borderBoxSize[0];if(t)return Math.round(t[e.options.horizontal?"inlineSize":"blockSize"])}return Math.round(o.getBoundingClientRect()[e.options.horizontal?"width":"height"])},St=(o,{adjustments:i=0,behavior:e},t)=>{var s,r;const a=o+i;(r=(s=t.scrollElement)==null?void 0:s.scrollTo)==null||r.call(s,{[t.options.horizontal?"left":"top"]:a,behavior:e})};class Et{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(s=>{s.forEach(r=>{this._measureElement(r.target,r)})}));return{disconnect:()=>{var s;(s=t())==null||s.disconnect(),e=null},observe:s=>{var r;return(r=t())==null?void 0:r.observe(s,{box:"border-box"})},unobserve:s=>{var r;return(r=t())==null?void 0:r.unobserve(s)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,s])=>{typeof s>"u"&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:bt,rangeExtractor:xt,onChange:()=>{},measureElement:_t,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...e}},this.notify=e=>{var t,s;(s=(t=this.options).onChange)==null||s.call(t,this,e)},this.maybeNotify=K(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t){this.maybeNotify();return}this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,r)=>{this.scrollAdjustments=0,this.scrollDirection=r?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=r,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const s=new Map,r=new Map;for(let a=t-1;a>=0;a--){const l=e[a];if(s.has(l.lane))continue;const c=r.get(l.lane);if(c==null||l.end>c.end?r.set(l.lane,l):l.end<c.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((a,l)=>a.end===l.end?a.index-l.index:a.end-l.end)[0]:void 0},this.getMeasurementOptions=K(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,t,s,r,a)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:s,getItemKey:r,enabled:a}),{key:!1}),this.getMeasurements=K(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:s,getItemKey:r,enabled:a},l)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,c);for(let u=c;u<e;u++){const g=r(u),b=this.options.lanes===1?d[u-1]:this.getFurthestMeasurement(d,u),x=b?b.end+this.options.gap:t+s,C=l.get(g),_=typeof C=="number"?C:this.options.estimateSize(u),k=x+_,E=b?b.lane:u%this.options.lanes;d[u]={index:u,start:x,size:_,end:k,key:g,lane:E}}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=K(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(e,t,s)=>this.range=e.length>0&&t>0?wt({measurements:e,outerSize:t,scrollOffset:s}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=K(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(e,t,s,r)=>t===null?[]:e({startIndex:t.startIndex,endIndex:t.endIndex,overscan:s,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,s=e.getAttribute(t);return s?parseInt(s,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const s=this.indexFromElement(e),r=this.measurementsCache[s];if(!r)return;const a=r.key,l=this.elementsCache.get(a);l!==e&&(l&&this.observer.unobserve(l),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(s,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const s=this.measurementsCache[e];if(!s)return;const r=this.itemSizeCache.get(s.key)??s.size,a=t-r;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,a,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,t)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((t,s)=>{t.isConnected||(this.observer.unobserve(t),this.elementsCache.delete(s))});return}this._measureElement(e,void 0)},this.getVirtualItems=K(()=>[this.getIndexes(),this.getMeasurements()],(e,t)=>{const s=[];for(let r=0,a=e.length;r<a;r++){const l=e[r],c=t[l];s.push(c)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(t.length!==0)return J(t[de(0,t.length-1,s=>J(t[s]).start,e)])},this.getOffsetForAlignment=(e,t)=>{const s=this.getSize(),r=this.getScrollOffset();t==="auto"&&(e<=r?t="start":e>=r+s?t="end":t="start"),t==="start"?e=e:t==="end"?e=e-s:t==="center"&&(e=e-s/2);const a=this.options.horizontal?"scrollWidth":"scrollHeight",c=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[a]:this.scrollElement[a]:0)-s;return Math.max(Math.min(c,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const s=this.measurementsCache[e];if(!s)return;const r=this.getSize(),a=this.getScrollOffset();if(t==="auto")if(s.end>=a+r-this.options.scrollPaddingEnd)t="end";else if(s.start<=a+this.options.scrollPaddingStart)t="start";else return[a,t];const l=t==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,t),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:t="start",behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:s})},this.scrollToIndex=(e,{align:t="auto",behavior:s}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const r=this.getOffsetForIndex(e,t);if(!r)return;const[a,l]=r;this._scrollToOffset(a,{adjustments:void 0,behavior:s}),s!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[d]=J(this.getOffsetForIndex(e,l));pt(d,this.getScrollOffset())||this.scrollToIndex(e,{align:l,behavior:s})}else this.scrollToIndex(e,{align:l,behavior:s})}))},this.scrollBy=(e,{behavior:t}={})=>{this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let s;return t.length===0?s=this.options.paddingStart:s=this.options.lanes===1?((e=t[t.length-1])==null?void 0:e.end)??0:Math.max(...t.slice(-this.options.lanes).map(r=>r.end)),Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:s})=>{this.options.scrollToFn(e,{behavior:s,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(i)}}const de=(o,i,e,t)=>{for(;o<=i;){const s=(o+i)/2|0,r=e(s);if(r<t)o=s+1;else if(r>t)i=s-1;else return s}return o>0?o-1:0};function wt({measurements:o,outerSize:i,scrollOffset:e}){const t=o.length-1,r=de(0,t,l=>o[l].start,e);let a=r;for(;a<t&&o[a].end<e+i;)a++;return{startIndex:r,endIndex:a}}const Mt=typeof document<"u"?p.useLayoutEffect:p.useEffect;function It(o){const i=p.useReducer(()=>({}),{})[1],e={...o,onChange:(s,r)=>{var a;r?Ae.flushSync(i):i(),(a=o.onChange)==null||a.call(o,s,r)}},[t]=p.useState(()=>new Et(e));return t.setOptions(e),p.useEffect(()=>t._didMount(),[]),Mt(()=>t._willUpdate()),t}function Ot(o){return It({observeElementRect:yt,observeElementOffset:jt,scrollToFn:St,...o})}const Tt=()=>{const{lang:o}=W(),[i,e]=Ue(),[t,s]=p.useState(!1),[r,a]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState(null),[g,b]=p.useState(""),[x,C]=p.useState({img:"",name:"",population:"",capital:"",info:"",nameKa:"",capitalKa:"",infoKa:""}),_=p.useRef(null),k=p.useRef(null),E=i.get("sortname")||"",V=i.get("sortType")||"",{status:X,data:ee,error:ue,isFetching:me,isFetchingNextPage:q,fetchNextPage:te,hasNextPage:U,refetch:N}=Qe({queryKey:["countries"],queryFn:({pageParam:h})=>qe({page:h,limit:10,sortName:E,sortType:V}),getNextPageParam:h=>h.nextOffset,initialPageParam:1}),w=ee?ee.pages.flatMap(h=>h.rows):[];console.log(w);const{mutate:G,isPending:fe}=L({mutationFn:he,onSuccess:()=>{N()},onError:h=>{console.log(h)}}),{mutate:ge,isPending:pe}=L({mutationFn:We,onSuccess:()=>{N()},onError:h=>{console.log(h)}}),{mutate:ve,isPending:be}=L({mutationFn:Ve,onSuccess:()=>{N()},onError:h=>{console.log(h)}}),xe=h=>{const{name:S,value:m}=h.target;S==="name"&&m.length>10?b("The name should not be longer than 10 letters"):(b(""),C(y=>({...y,[S]:m})))},ye=async h=>{h.preventDefault();const S=new FormData(h.currentTarget),m={img:"",name:"",population:"",capital:"",info:"",nameKa:"",infoKa:"",capitalKa:"",votes:0};for(const[y,P]of S)if(y==="img"){const Oe=await se(P);m.img=Oe}else m[y]=P;ve(m),C({img:"",name:"",population:"",capital:"",info:"",nameKa:"",capitalKa:"",infoKa:""})},se=h=>new Promise((S,m)=>{const y=new FileReader;y.onloadend=()=>S(y.result),y.onerror=P=>m(P),y.readAsDataURL(h)}),A=async h=>{const{name:S,value:m,files:y}=h.target;if(S==="img"&&y&&y[0]){console.log("files",y);const P=await se(y[0]);u(ne=>({...ne,img:P}))}else u(P=>({...P,[S]:m}))},Ce=h=>{if(h.preventDefault(),!d)return;console.log(d.img);const S={name:d.name,population:d.population,capital:d.capital,info:d.info,img:d.img};G({id:l,payload:S}),s(!1),c(null),u(null)},je=h=>{G({id:h,payload:{isDeleted:!0}}),a(!r),c(h)},_e=()=>{l&&(ge(l),a(!r),c(null))},Se=()=>{G({id:l,payload:{isDeleted:!1}},{onSuccess:()=>{N()}}),a(!r),c(null)},Ee=h=>{c(h.id),s(!0),u(h),setTimeout(()=>{_.current&&_.current.scrollIntoView({behavior:"smooth",block:"center"})},0)},H=Ot({count:U?w.length+1:w.length,getScrollElement:()=>k.current,estimateSize:()=>600}),Q=H.getVirtualItems();$e.useEffect(()=>{const[h]=[...Q].reverse();h&&h.index>=w.length-1&&U&&!q&&te()},[U,te,w.length,q,Q]),p.useEffect(()=>{N()},[N,i]);const we=()=>{e({sortname:"votes",sortType:"asc"}),N()},Me=()=>{e({sortname:"-votes",sortType:"desc"})},Ie=()=>{e({sortname:"",sortType:""})};return n.jsxs("div",{children:[n.jsxs("div",{className:v["sort-divs"],children:[n.jsx("button",{onClick:we,className:v.sortBtn,children:"Sort by Votes (Increasing)"}),n.jsx("button",{onClick:Me,className:v.sortBtn,children:"Sort by Votes (Decreasing)"}),n.jsx("button",{onClick:Ie,className:v.sortBtn,children:"Clear Sort"})]}),n.jsx("div",{className:r?v.overlay:v["none-sure-div"]}),n.jsxs("div",{className:r?v["display-sure-div"]:v["none-sure-div"],children:[n.jsx("h1",{children:"You Sure You Want To Delete?"}),n.jsx("button",{className:v.btn,onClick:_e,disabled:pe,children:"Yes"}),n.jsx("button",{className:v.btn,onClick:Se,children:"No"})]}),n.jsx("div",{className:v["search-div"],children:n.jsxs("form",{id:"searchForm",children:[n.jsx("input",{type:"text"}),n.jsx("button",{type:"submit",children:o==="eng"?"Clear Search":"ძიების გასუფთავება"})]})}),t&&d&&n.jsx("div",{className:v.display,children:n.jsxs("form",{ref:_,onSubmit:Ce,children:[n.jsxs("label",{children:["Update Image",n.jsx("input",{type:"file",name:"img",accept:".jpg, .jpeg, .png",onChange:A})]}),n.jsxs("label",{children:["Update Name:",n.jsx("input",{type:"text",name:"name",value:d.name,onChange:A})]}),n.jsxs("label",{children:["Update Capital:",n.jsx("input",{type:"text",name:"capital",value:d.capital,onChange:A})]}),n.jsxs("label",{children:["Update Population:",n.jsx("input",{type:"text",name:"population",value:d.population,onChange:A})]}),n.jsxs("label",{children:["Update Info:",n.jsx("input",{type:"text",name:"info",value:d.info,onChange:A})]}),n.jsx("button",{className:v.btn,type:"submit",disabled:fe,children:"Save Changes"})]})}),n.jsxs("div",{ref:k,style:{overflow:"auto",height:"1000px"},children:[X==="pending"?n.jsx("p",{children:"Loading..."}):X==="error"?n.jsxs("span",{children:["Error: ",ue.message]}):n.jsx("div",{className:v["cards-container"],style:{height:H.getTotalSize(),width:"100%",position:"relative"},children:Q.map(h=>{const S=h.index>w.length-1,m=w==null?void 0:w[h.index];return m?n.jsx("div",{ref:y=>{y&&H.measureElement(y)},"data-index":h.index,style:{position:"absolute",left:0,width:"100%",height:h.size,top:h.start},className:m.isDeleted?v["removed-card-div"]:v["card-div"],children:S?U?"Loading more...":"Nothing more to load":n.jsxs("div",{className:v["virtual-card-divs"],children:[n.jsx(nt,{id:m.id,votes:m.votes,refetch:N}),n.jsxs(Le,{to:`/${o}/country/${m.id}`,children:[n.jsx(ot,{img:m.img}),n.jsx("hr",{}),n.jsx(tt,{name:o==="eng"?m.name:m.nameKa,population:m.population,capital:o==="eng"?m.capital:m.capitalKa})]}),n.jsxs("div",{children:[n.jsx("button",{className:v.btn,onClick:()=>je(m.id),children:o==="eng"?`${m.isDeleted?"Undo":"Delete"}`:`${m.isDeleted?"დაბრუნება":"წაშლა"}`}),n.jsx("button",{className:v.btn,onClick:()=>Ee(m),children:o==="eng"?"Update":"განახლება"})]})]})},h.index):null})}),n.jsx("div",{children:me&&!q?"Background Updating...":null})]}),n.jsx("div",{children:n.jsx(gt,{handleOnSubmit:ye,handleOnChange:xe,inputErrorMessage:g,name:x.name,population:x.population,capital:x.capital,info:x.info,nameKa:x.nameKa,capitalKa:x.capitalKa,infoKa:x.infoKa,addCountryIsPending:be})})]})},zt=()=>n.jsxs("div",{children:[n.jsx(Xe,{}),n.jsx(Tt,{})]});export{zt as default};
